<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ImageCryptoLab ‚Äî Convert ‚Ä¢ Base64/Hex ‚Ä¢ AES/DES Encrypt/Decrypt</title>
  <link rel="stylesheet" href="./styles.css" />
  <!-- CryptoJS (AES/DES) via CDN -->
  <script defer src="https://cdn.jsdelivr.net/npm/crypto-js@4.2.0/crypto-js.min.js"></script>
  <script defer src="./app.js"></script>
</head>
<body>
  <header class="wrap header">
    <div class="brand">
      <div class="logo" aria-hidden="true">üß™</div>
      <div>
        <h1>ImageCryptoLab</h1>
        <p class="sub">Convert images ‚Ä¢ Extract Base64/Hex ‚Ä¢ Encrypt/Decrypt with AES or DES (client‚Äëside)</p>
      </div>
    </div>
    <div class="pill">Runs 100% in your browser ‚Äî suitable for GitHub Pages</div>
  </header>

  <main class="wrap">
    <section class="card">
      <h2>1) Pick an image</h2>
      <div class="grid2">
        <div>
          <label class="btn">
            <input id="fileInput" type="file" accept="image/*" />
            Choose image
          </label>
          <div class="meta" id="fileMeta">No file selected</div>

          <div class="row gap">
            <button class="btn secondary" id="clearBtn" type="button">Clear</button>
            <button class="btn secondary" id="downloadOriginalBtn" type="button" disabled>Download original</button>
          </div>

          <div class="notice">
            <strong>Note:</strong> ‚ÄúConvert between all types‚Äù isn‚Äôt possible in pure browser‚Äëonly code.
            This app supports converting to <code>PNG</code>, <code>JPEG</code>, or <code>WebP</code> using Canvas.
            It can still read many image inputs that your browser can decode (PNG/JPEG/WebP/GIF/BMP/SVG, etc.).
          </div>
        </div>

        <div class="preview">
          <div class="previewBox">
            <img id="previewImg" alt="Preview" />
            <div class="placeholder" id="previewPlaceholder">Preview appears here</div>
          </div>
        </div>
      </div>
    </section>

    <section class="card">
      <h2>2) Tools</h2>

      <div class="tabs" role="tablist" aria-label="Tools tabs">
        <button class="tab active" data-tab="convert" role="tab" aria-selected="true">Convert</button>
        <button class="tab" data-tab="encode" role="tab" aria-selected="false">Base64 / Hex</button>
        <button class="tab" data-tab="encrypt" role="tab" aria-selected="false">Encrypt</button>
        <button class="tab" data-tab="decrypt" role="tab" aria-selected="false">Decrypt</button>
      </div>

      <!-- Convert -->
      <div class="panel show" id="panel-convert" role="tabpanel">
        <h3>Convert image format (PNG / JPEG / WebP)</h3>
        <div class="grid3">
          <div>
            <label>Output format</label>
            <select id="outFormat">
              <option value="image/png">PNG (.png)</option>
              <option value="image/jpeg">JPEG (.jpg)</option>
              <option value="image/webp">WebP (.webp)</option>
            </select>
          </div>
          <div>
            <label>Quality (JPEG/WebP)</label>
            <input id="outQuality" type="range" min="0" max="1" step="0.01" value="0.92" />
            <div class="meta"><span id="qualityLabel">0.92</span></div>
          </div>
          <div class="alignEnd">
            <button class="btn" id="convertBtn" type="button" disabled>Convert & download</button>
          </div>
        </div>

        <div class="divider"></div>

        <h3>Resize (optional) before converting</h3>
        <div class="grid3">
          <div>
            <label>Width (px)</label>
            <input id="resizeW" type="number" min="1" placeholder="auto" />
          </div>
          <div>
            <label>Height (px)</label>
            <input id="resizeH" type="number" min="1" placeholder="auto" />
          </div>
          <div class="alignEnd">
            <button class="btn secondary" id="applyResizeBtn" type="button" disabled>Apply resize to preview</button>
          </div>
        </div>
        <div class="meta">Tip: leave one of width/height empty to keep aspect ratio.</div>

        <div class="divider"></div>

        <h3>Auto-compression</h3>
        <div class="grid3">
          <div>
            <label style="display: flex; align-items: center; gap: 8px; margin: 0; cursor: pointer;">
              <input type="checkbox" id="autoCompress" style="width: auto; padding: 0; border: none; margin: 0;" />
              <span>Auto-compress image</span>
            </label>
            <div class="meta">Reduces file size using optimal quality</div>
          </div>
          <div>
            <label>Target max size (KB)</label>
            <input id="maxSize" type="number" min="10" max="10000" value="500" />
          </div>
          <div class="alignEnd">
            <div id="compressionInfo" class="meta"></div>
          </div>
        </div>
      </div>

      <!-- Encode -->
      <div class="panel" id="panel-encode" role="tabpanel">
        <h3>Base64 + Hex for the current file bytes</h3>
        <div class="row gap wrapRow">
          <button class="btn" id="makeBase64Btn" type="button" disabled>Generate Base64</button>
          <button class="btn" id="makeHexBtn" type="button" disabled>Generate Hex</button>
          <button class="btn secondary" id="copyEncodeBtn" type="button" disabled>Copy output</button>
          <button class="btn secondary" id="downloadEncodeBtn" type="button" disabled>Download output (.txt)</button>
        </div>
        <label class="mt">Output</label>
        <textarea id="encodeOut" spellcheck="false" placeholder="Base64 or Hex will appear here..."></textarea>
        <div class="meta" id="encodeMeta"></div>
      </div>

      <!-- Encrypt -->
      <div class="panel" id="panel-encrypt" role="tabpanel">
        <h3>Encrypt file bytes ‚Äî client‚Äëside with full parameters</h3>

        <div class="grid3">
          <div>
            <label>Algorithm</label>
            <select id="encAlg">
              <option value="AES">AES</option>
              <option value="DES">DES</option>
              <option value="TripleDES">Triple DES</option>
            </select>
          </div>

          <div>
            <label>Key Size (bits)</label>
            <select id="encKeySize">
              <option value="128">128</option>
              <option value="192">192</option>
              <option value="256" selected>256</option>
            </select>
          </div>

          <div>
            <label>Cipher Mode</label>
            <select id="encMode">
              <option value="CBC" selected>CBC</option>
              <option value="ECB">ECB</option>
              <option value="CFB">CFB</option>
              <option value="OFB">OFB</option>
              <option value="CTR">CTR</option>
            </select>
          </div>
        </div>

        <div class="grid3 mt">
          <div>
            <label>Padding Mode</label>
            <select id="encPadding">
              <option value="Pkcs7" selected>PKCS7</option>
              <option value="AnsiX923">ANSI X9.23</option>
              <option value="Iso10126">ISO 10126</option>
              <option value="Iso97971">ISO 9797-1</option>
              <option value="NoPadding">No Padding</option>
            </select>
          </div>

          <div>
            <label>IV Size (bytes)</label>
            <input id="encIVSize" type="number" min="8" max="32" value="16" />
          </div>

          <div>
            <label>Salt Length (bytes)</label>
            <input id="encSaltSize" type="number" min="0" max="32" value="8" />
          </div>
        </div>

        <div class="grid3 mt">
          <div>
            <label>Passphrase</label>
            <input id="encPass" type="password" placeholder="Enter strong passphrase" />
          </div>

          <div>
            <label>Iterations (PBKDF2)</label>
            <input id="encIterations" type="number" min="1000" max="1000000" value="10000" />
          </div>

          <div class="alignEnd">
            <button class="btn" id="encryptBtn" type="button" disabled>Encrypt</button>
          </div>
        </div>

        <div class="grid3 mt">
          <div>
            <label>Output Encoding</label>
            <select id="encOutFmt">
              <option value="base64" selected>Base64</option>
              <option value="hex">Hex</option>
              <option value="base32">Base32</option>
            </select>
          </div>
          <div class="alignEnd">
            <button class="btn secondary" id="copyEncBtn" type="button" disabled>Copy ciphertext</button>
          </div>
          <div class="alignEnd">
            <button class="btn secondary" id="downloadEncBtn" type="button" disabled>Download ciphertext</button>
          </div>
        </div>

        <label class="mt">Encryption Info</label>
        <textarea id="encInfo" spellcheck="false" readonly placeholder="Encryption parameters will appear here..."></textarea>

        <label class="mt">Ciphertext</label>
        <textarea id="encOut" spellcheck="false" placeholder="Ciphertext will appear here..."></textarea>

        <div class="notice">
          <strong>Encryption Parameters:</strong><br/>
          ‚Ä¢ Algorithm: AES-128/192/256 or DES/TripleDES<br/>
          ‚Ä¢ Mode: CBC (default), ECB, CFB, OFB, CTR<br/>
          ‚Ä¢ Padding: PKCS7, ANSI X9.23, ISO 10126, ISO 9797-1<br/>
          ‚Ä¢ IV: Randomly generated per encryption<br/>
          ‚Ä¢ Salt: OpenSSL-compatible EVP format<br/>
          ‚Ä¢ Key Derivation: PBKDF2 with configurable iterations<br/>
          Keep ALL parameters consistent to decrypt successfully.
        </div>
      </div>

      <!-- Decrypt -->
      <div class="panel" id="panel-decrypt" role="tabpanel">
        <h3>Decrypt ciphertext back to bytes with parameter matching</h3>

        <div class="grid3">
          <div>
            <label>Algorithm</label>
            <select id="decAlg">
              <option value="AES">AES</option>
              <option value="DES">DES</option>
              <option value="TripleDES">Triple DES</option>
            </select>
          </div>

          <div>
            <label>Key Size (bits)</label>
            <select id="decKeySize">
              <option value="128">128</option>
              <option value="192">192</option>
              <option value="256" selected>256</option>
            </select>
          </div>

          <div>
            <label>Cipher Mode</label>
            <select id="decMode">
              <option value="CBC" selected>CBC</option>
              <option value="ECB">ECB</option>
              <option value="CFB">CFB</option>
              <option value="OFB">OFB</option>
              <option value="CTR">CTR</option>
            </select>
          </div>
        </div>

        <div class="grid3 mt">
          <div>
            <label>Padding Mode</label>
            <select id="decPadding">
              <option value="Pkcs7" selected>PKCS7</option>
              <option value="AnsiX923">ANSI X9.23</option>
              <option value="Iso10126">ISO 10126</option>
              <option value="Iso97971">ISO 9797-1</option>
              <option value="NoPadding">No Padding</option>
            </select>
          </div>

          <div>
            <label>Iterations (PBKDF2)</label>
            <input id="decIterations" type="number" min="1000" max="1000000" value="10000" />
          </div>

          <div>
            <label>Ciphertext Encoding</label>
            <select id="decInFmt">
              <option value="base64" selected>Base64</option>
              <option value="hex">Hex</option>
              <option value="base32">Base32</option>
            </select>
          </div>
        </div>

        <div class="grid3 mt">
          <div>
            <label>Passphrase</label>
            <input id="decPass" type="password" placeholder="Enter passphrase (must match encryption)" />
          </div>

          <div class="alignEnd">
            <button class="btn" id="decryptBtn" type="button">Decrypt</button>
          </div>

          <div></div>
        </div>

        <label class="mt">Paste Ciphertext Below</label>
        <textarea id="decIn" spellcheck="false" placeholder="Paste ciphertext here..."></textarea>

        <label class="mt">Decryption Parameters</label>
        <textarea id="decInfo" spellcheck="false" readonly placeholder="Decryption parameters and result will appear here..."></textarea>

        <div class="grid2 mt">
          <button class="btn secondary" id="downloadDecBtn" type="button" disabled>Download decrypted file</button>
          <button class="btn secondary" id="useAsCurrentBtn" type="button" disabled>Use as current file</button>
        </div>

        <label class="mt">Decrypted Preview</label>
        <div class="preview">
          <img id="decPreviewImg" style="display: none; max-width: 100%; max-height: 200px; border-radius: 4px;" />
          <div id="decPreviewPlaceholder" style="color: #999; padding: 20px; text-align: center;">Preview will appear here...</div>
        </div>

        <div id="decMeta" style="margin-top: 10px; font-size: 0.85em; color: #666;"></div>

        <div class="notice">
          <strong>Decryption Requirements:</strong><br/>
          ‚Ä¢ Must use exact same algorithm and key size<br/>
          ‚Ä¢ Cipher mode, padding, and PBKDF2 iterations must match<br/>
          ‚Ä¢ Ciphertext encoding (Base64/Hex/Base32) must match output format<br/>
          ‚Ä¢ Even one parameter mismatch will cause decryption to fail<br/>
          ‚Ä¢ Save encryption parameters securely for future decryption
        </div>
      </div>
            <button class="btn secondary" id="downloadDecBtn" type="button" disabled>Download decrypted bytes</button>
          </div>
          <div class="alignEnd">
            <button class="btn secondary" id="useAsCurrentBtn" type="button" disabled>Use decrypted as current</button>
          </div>
        </div>

        <label class="mt">Paste ciphertext</label>
        <textarea id="decIn" spellcheck="false" placeholder="Paste Base64 or Hex ciphertext here..."></textarea>
        <div class="meta" id="decMeta"></div>

        <div class="divider"></div>

        <h3>Decrypted preview (if it looks like an image)</h3>
        <div class="preview">
          <div class="previewBox">
            <img id="decPreviewImg" alt="Decrypted preview" />
            <div class="placeholder" id="decPreviewPlaceholder">Decrypted preview appears here</div>
          </div>
        </div>
      </div>

    </section>

    <section class="card">
      <h2>3) Share & Deploy</h2>
      <div class="notice">
        ‚úÖ <strong>Already deployed!</strong> This app runs 100% client-side (in your browser).
        <br/>
        üì± Share the URL with anyone. No backend or server needed.
        <br/>
        üîí Your data never leaves your computer ‚Äî everything encrypts locally.
      </div>
    </section>

    <footer class="footer">
      <span>Made for GitHub Pages ‚Ä¢ Vanilla HTML/CSS/JS ‚Ä¢ CryptoJS AES/DES</span>
    </footer>
  </main>
</body>
</html>
